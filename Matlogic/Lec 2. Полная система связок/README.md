# Лекция 2. Полные системы связок
1. Функциональная полнота системы связок (¬, ∧, ∨, →)
2. Приведение формул к нормальным формам
3. Другие полные системы связок
4. Критерий Поста

Наша система связок по уменьшению приоритета (¬, ∧, ∨, →, ↔)

есть связки нулевой (1, 0) единичной (отрицание ) и двойной арности

для эквивалентных формул эквивалентность - тавтология. эквивалентны - значит кодируют одну и ту же булеву функцию
##  Ф п
### Эквивалентность и нормальные формы
Отношение эквивалентности — это рефлексивное,
симметричное и транзитивное отношение.

В нашей истинностной интерпретации формул связка ↔
является отношением эквивалентности.

*Любое* такое отношение определяет **факторизацию** —
однозначное разбиение всех элементов на классы
эквивалентности.

Как определить, принадлежат ли две формулы к одному
классу эквивалентности?

Удобный способ — определить для каждого класса нормальную форму, то есть выделить в каждом классе
уникальный элемент и задать алгоритм приведения
любого другого элемента к нему

### ДНФ и КНФ
**Литерал** — пропозициональная переменная или ее
отрицание.

**Конъюнкт** — конъюнкция литералов. Например,
p ∧ ¬q ∧ ¬r.

Формула называется дизъюнктивной нормальной формой
(ДНФ), если она представляет собой дизъюнкцию
конъюнктов: p ∧ ¬q ∧ ¬r ∨ ¬p ∧ s ∨ p.

Дизъюнкт — дизъюнкция литералов. Например,
¬p ∨ q ∨ r.

Формула называется конъюнктивной нормальной формой
(КНФ), если она представляет собой конъюнкцию
дизъюнктов: (¬p ∨ q ∨ s) ∧ ¬q ∧ (r ∨ ¬r).

ДНФ и КНФ не совсем нормальные формы. Их мб несколько, они не задают однозначно класс эквивалентости

### Совершенные КНФ и ДНФ
ДНФ называют совершенной (СДНФ), если **любая**
пропозициональная переменная входит в **каждый**
конъюнкт ровно один раз: ¬p ∧ ¬q ∨ p ∧ ¬q ∨ p ∧ q.
> когда она истина? когда хотя бы 1 конъюнкт истинна  
> по сути это таблица истинности, записанная на другом языке: естро в строке 1 - ставим у переменной p, если 1 и -p, если 0  
> можем закодировать истину

КНФ называют совершенной (СКНФ), если любая
пропозициональная переменная входит в каждый
дизъюнкт ровно один раз: (¬p ∨ ¬q) ∧ (¬p ∨ q) ∧ (p ∨ q).
> конъюнкция почти вссегда описывает ложь (кроме одного)  
> для каждого дизъюнкта выписываем, когда он ложен и ставим напротив его в таблице истинности 0. то, что не записано - будет единицы  
> можем закодировать ложь

Как записать тавтологию и противоречие в CДНФ и
CКНФ?

### Функциональная полнота системы связок (¬, ∧, ∨, →)
**Теорема о полноте.** Любая булева функция n переменных
может быть записана в виде пропозициональной формулы.

Доказательство.
 
* Пусть формула выполнима (т.е. не противорчение (не ложь)). Для каждой строки со
значением 1 в таблице истинности, задающей функцию,
строим конъюнкт из всех переменных, имеющих значение
1, и отрицаний переменных, имеющих значение 0. Искомая
формула представляет собой дизъюнкцию таких
конъюнкций.

Пусть формула необщезначима (т.е. не тавтология) (1). Для каждой строки со
значением 0 в таблице истинности, строим дизъюнкт из
всех переменных, имеющих значение 0, и отрицаний
переменных, имеющих значение 1. Искомая формула
представляет собой конъюнкцию таких дизъюнкций. 

> Для доказательства (1) достаточно покрыть случай противоречия.

> зачем? хотим доказать, тавтология ли формула. значит у нее будет пустая кнф (или очень маленькая, если лжи мало). можно так доказать тавтологичность

## 2. Приведение к НФ 
### Алгоритм построения ДНФ
заполняем 2^n ячеек памяти, значит и алгоритм экспоненциальный

Избавляемся от импликаций, используя эквивалентность
A → B ↔ ¬A ∨ B.
Избавляемся от отрицаний составных подформул,
используя законы Де Моргана
¬(A ∧ B) ↔ ¬A ∨ ¬B
¬(A ∨ B) ↔ ¬A ∧ ¬B
Избавляемся от двойного отрицания: ¬(¬A) ↔ A.
Используем дистрибутивность и поглощение
A ∧ (B ∨ C) ↔ A ∧ B ∨ A ∧ C
A ∧ (A ∨ B) ↔ A
A ∨ A ∧ B ↔ A

### Алгоритм построения CДНФ по ДНФ
Если в конъюнкте не хватает переменной (скажем q),
добавляем в него q ∨ ¬q.
p ∨ p ∧ ¬q ↔ p ∧ (q ∨ ¬q) ∨ p ∧ ¬q
Используем дистрибутивность
A ∧ (B ∨ C) ↔ A ∧ B ∨ A ∧ C
p ∧ (q ∨ ¬q) ∨ p ∧ ¬q ↔ p ∧ q ∨ p ∧ ¬q ∨ p ∧ ¬q
Убираем повторяющиеся конъюнкты, используя
идемпотентность ∨
A ∨ A ↔ A
p ∧ q ∨ p ∧ ¬q ∨ p ∧ ¬q ↔ p ∧ q ∨ p ∧ ¬q

### Алгоритм построения КНФ
Избавляемся от импликаций, используя эквивалентность
A → B ↔ ¬A ∨ B.
Избавляемся от отрицаний составных подформул,
используя законы Де Моргана
¬(A ∧ B) ↔ ¬A ∨ ¬B
¬(A ∨ B) ↔ ¬A ∧ ¬B
Избавляемся от двойного отрицания.
Используем дистрибутивность и поглощение
**A ∨ B ∧ C ↔ (A ∨ B) ∧ (A ∨ C)**
A ∧ (A ∨ B) ↔ A
A ∨ A ∧ B ↔ A

### Алгоритм построения CКНФ по КНФ
Если в дизъюнкте не хватает переменной (скажем q),
добавляем в него q ∧ ¬q.
p ∧ (p ∨ ¬q) ↔ (p ∨ q ∧ ¬q) ∧ (p ∨ ¬q)
Используем дистрибутивность
A ∨ B ∧ C ↔ (A ∨ B) ∧ (A ∨ C)
(p ∨ q ∧ ¬q) ∧ (p ∨ ¬q) ↔ (p ∨ q) ∧ (p ∨ ¬q) ∧ (p ∨ ¬q)
Убираем повторяющиеся дизъюнкты, используя
идемпотентность ∧
A ∧ A ↔ A
(p ∨ q) ∧ (p ∨ ¬q) ∧ (p ∨ ¬q) ↔ (p ∨ q) ∧ (p ∨ ¬q)

## 3
### Примеры полных систем
Система связок полна, если позволяет закодировать любую функцию

Система связок (¬, ∧, ∨) полна. Действительно, от
импликации можно избавиться, используя эквивалентность
A → B ↔ ¬A ∨ B

Система связок (¬, ∧) полна. От дизъюнкции можно
избавиться, используя следствие закона Де Моргана
A ∨ B ↔ ¬(¬A ∧ ¬B)

Система связок (¬, ∨) полна. От конъюнкции можно
избавиться, используя следствие закона Де Моргана
A ∧ B ↔ ¬(¬A ∨ ¬B)

Полна ли система связок (¬, →)? Да:
A ∨ B ↔ ¬A → B

Отрицание и любая другая свзязка - дает полную систему
### Полные системы из одной связки
штрих Шеффера (вверх), стрелка Пирса (вниз)

нечитабельный ассемблер из одного оператора

### Полиномы Жегалкина
* **Моном** — это либо константа 1, либо коньюнкция набора
переменных.
* Полином Жегалкина — сумма мономов по модулю 2.
* Поскольку A ⊕ A ↔ 0, то повторяющиеся четное число
раз мономы в полиноме сокращают друг друга.
* Теорема. Всякая булева функция может быть
представлена полиномом Жегалкина.
* Доказательство. Простая матиндукция. Пусть умеем представлять
полиномом булеву функцию n − 1 переменной. Тогда
$$ f(p1, . . . , pn) = f(0, p2, . . . , pn) ⊕

f(0, p2, . . . , pn) ⊕ f(1, p2, . . . , pn) ∧ p_1$$
 > как записать булеву функцию? 

 > p1 = 0 - все уимрает (тк 2 и 3 слагаемый в скобках и в конъюнкии с р1), кроме первого (в котором как раз p1 = 0). иначе остается сумма 3 штук, первые две повтряются и остается формула с p1 = 1

 > степень полинома - самая высокая степень монома

 ### Алгебраическая нормальная форма
**Теорема**. Всякая булева функция однозначно может быть
представлена полиномом Жегалкина.

Доказательство. Пусть f(p1, . . . , pn) представима разными
полиномами M и N. Они равны при любых оценках, то есть
M ⊕ N ↔ 0.

Докажем по индукции, что тогда A ≡ M ⊕ N не содержит
мономов (то есть M и N равны как полиномы)
A(p1, . . . , pn) = B(p2, . . . , pn) ⊕ p1 ∧ C(p2, . . . , pn)

Полагая p1 = 0 и p1 = 1 видим, что B ↔ 0 и C ↔ 0, (по IH)
они не содержат мономов, то есть A не содержит мономов. 

> однозначно задает булеву функцию

## Критерий Поста
> как доказать, что система связок полная?

* предполная - не полная, но связанная

### Примеры неполных систем
* Система связок (∧, ∨) не полна. Она позволяет выразить
только монотонные функции (монотонно неубывающие по
каждому своему аргументу). Композиция монотонных функций монотонна
 
 > а у не, например, результата меньше   
 > может не сохранять единицу

* Функция называется сохраняющей единицу, если
f(1, 1, . . . , 1) = 1 
> их композиция тоже сохраняет единицу  
> может быт не монотонным
* Система связок (∧, ∨, →) не полна. Она “сохраняет
единицу”.
Имеется ли универсальный способ определения
полноты/неполноты системы связок?

### Предполные классы булевых функций
> замкнуты тоносительно композиции (если набор функци обладает свойствами, то и любая их сцепка тоже)
Выделяют 5 предполных классов:
* функции сохраняющие ноль, T0 ;
* функции сохраняющие единицу, T1;
* монотонные функции, M;
* линейные функции, L;
> в полиноме жигалкина не имеют pq
* самодвойственные функции, S.
> двойственны сами к себе. 
* Функция называется самодвойственной, если
f(p1, p2, . . . , pn) = ¬f(¬p1,¬p2, . . . ,¬pn)
* Функция называется линейной, если все мономы в
представляющем ее полиноме Жегалкина содержат не
более одной переменной
f(p1, p2, . . . , pn) = α0 ⊕ α1 ∧ p1 ⊕ α2 ∧ p2 ⊕ . . . ⊕ αn ∧ pn

### Критерий Поста
* **Теорема**. Если набор функций содержится в некотором
предполном классе, то любая композиция этих функций
тоже содержится в этом классе.


* Теорема (критерий Поста). Набор булевых функций
является полным тогда и только тогда, когда он не
принадлежит целиком к одному из предполных классов T0,
T1, M, L, S.

т.е. есть такой набор функций, что для каждой группы есть хотя бы 1 функция, которая не входит в нее 

> т.е. не 
Доказательство.
Необходимость. Следует из предыдущей теоремы.
Достаточность. Сконструируем связки, образующие
полный набор, из функций, не лежащих в классах T0, T1,
M, L, S.
### Конструируем ¬ или константы
Пусть f 6∈ T0. Подставим вместо всех переменных одну (p),
получим
f(0, 0, . . . , 0) = 1
подставим одну и ту же переменную
f(p, p, . . . , p) = ?
* если на единичках p f = 0, то это не
* если на единичках p f = 1, то это константная функция 1
Результат: имеем либо константную функцию 1, либо ¬.
Пусть f 6∈ T1. Подставим вместо всех переменных одну (p),
получим
f(p, p, . . . , p) = ?
f(1, 1, . . . , 1) = 0
Результат: имеем либо константную функцию 0, либо ¬
### Конструируем ¬ и константы
Если ¬ все еще нет, то есть обе константы.
Пусть f not∈ M. Найдем переменную, на которой она убывает,
подставим подходящие константы вместо остальных,
получим ¬.
Может еще не хватать констант.
Пусть f 6∈ S. Тогда на некотором наборе значений
f(α1, α2, . . . , αn) = f(¬α1,¬α2, . . . ,¬αn)
Вместо 0 подставляем p, вместо 1 подставляем ¬p.
Результат: имеем какую-то константную функцию, другая
получается отрицанием


если есть набор функций, который не принадлежит полностью 